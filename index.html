<!doctype html>
<html lang="en">
<head>
<link rel="manifest" href="assets/manifest.json">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
<link rel="shortcut icon" href="assets/favicon.ico">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lymo</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  /* Your full CSS remains exactly the same */
  :root{
    --bg:#071017;
    --card:#081018;
    --lime-1:#c7ff5a;
    --lime-2:#8ef23b;
    --muted:#9fb1b1;
    --glass: rgba(255,255,255,0.03);
    --radius:14px;
    --shadow: 0 12px 40px rgba(2,8,10,0.6);
    --accent: linear-gradient(90deg,var(--lime-1),var(--lime-2));
    --ease:cubic-bezier(.16,.84,.32,1);
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color-scheme: dark;
  }

  /* Animated background */
  body{
    margin:0; padding:28px;
    background:
      radial-gradient(500px 300px at 8% 10%, rgba(140,255,120,0.06), transparent 10%),
      radial-gradient(700px 420px at 92% 90%, rgba(140,255,120,0.03), transparent 6%),
      linear-gradient(180deg,#04060a 0%, #071017 100%);
    color:#e6f5e9;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    min-height:100vh;
  }

  header{
    display:flex; align-items:center; gap:16px;
    position:sticky; top:18px; z-index:40;
    backdrop-filter: blur(6px);
    padding:10px 12px; border-radius:12px;
    border:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 8px 40px rgba(2,8,10,0.55);
  }

  .logo{
    display:flex; align-items:center; gap:10px;
    background:var(--accent); color:#041b07;
    padding:10px 14px;border-radius:12px;
    font-weight:800; letter-spacing:0.6px;
  }
  .logo .dot{width:12px;height:12px;border-radius:3px;background:#063;box-shadow:0 0 18px rgba(183,255,76,0.6) inset}

  .search{margin-left:auto; display:flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); color:var(--lime-1)}
  .search input{background:transparent;border:0;outline:none;color:inherit;width:180px;font-weight:600}

  main{display:grid; grid-template-columns: 1fr 320px; gap:22px; margin-top:18px; align-items:start}

/* Feed */
  .feed{max-width:940px;}
  .controls{display:flex; gap:10px; align-items:center; margin-bottom:14px}
  .btn{background:transparent;border:1px solid rgba(255,255,255,0.04); padding:9px 12px;border-radius:10px;color:var(--lime-1); cursor:pointer; font-weight:700; transition:transform .12s var(--ease), box-shadow .12s var(--ease)}
  .btn:hover{transform:translateY(-3px); box-shadow:var(--shadow)}
  .btn.primary{background:var(--accent); color:#05220b; border:none; box-shadow: 0 10px 30px rgba(142,242,59,0.08)}

  .composer{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px; padding:14px; margin-bottom:14px; border:1px solid rgba(255,255,255,0.03);
    display:flex; gap:12px; align-items:flex-start; box-shadow: 0 6px 20px rgba(2,8,10,0.45);
    transition: transform .18s var(--ease), box-shadow .18s var(--ease);
  }
  .composer:hover{transform:translateY(-4px); box-shadow: 0 16px 50px rgba(2,8,10,0.55)}
  .composer.disabled{opacity:0.55; filter:grayscale(.06); pointer-events:none}

  textarea{flex:1; min-height:68px; resize:vertical; background:transparent; border:1px dashed rgba(255,255,255,0.03); padding:10px; border-radius:10px; color:inherit; font-size:14px; outline:none}
  .composer .meta{width:160px; display:flex; flex-direction:column; gap:8px}
  .small{font-size:13px;color:var(--muted)}

  /* posts */
  .post{background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border-radius:14px; padding:12px; display:flex; gap:12px; border:1px solid rgba(255,255,255,0.03); margin-bottom:12px; align-items:flex-start; box-shadow: 0 10px 30px rgba(2,8,10,0.35); transform-origin:top center; animation:cardIn .32s var(--ease) both}
  @keyframes cardIn{from{opacity:0; transform:translateY(8px) scale(.995)} to{opacity:1; transform:translateY(0) scale(1)}}

  .post .votes{width:62px; display:flex; flex-direction:column; align-items:center; gap:8px; padding-top:6px}
  .vote-btn{background:transparent;border:0; color:var(--muted); font-weight:800; cursor:pointer; font-size:20px; transition:transform .12s var(--ease)}
  .vote-btn:hover{transform:translateY(-3px)}
  .score{font-weight:800; font-size:16px; color:var(--lime-1)}

  .post .body{flex:1}
  .post .title{font-weight:800; font-size:15px; margin-bottom:6px}
  .post .text{color:var(--muted); font-size:14px; margin-bottom:8px; white-space:pre-wrap}
  .post .meta{display:flex; gap:10px; align-items:center; font-size:13px; color:var(--muted)}
  .avatar{width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#0a1,#012);display:flex;align-items:center;justify-content:center;font-weight:800;color:#071017}

  /* like button */
  .like-btn{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; cursor:pointer; border:1px solid rgba(255,255,255,0.03); background:transparent; transition:all .12s var(--ease)}
  .like-btn .heart{font-size:18px; transition:transform .12s var(--ease), color .12s}
  .like-btn.liked{background:linear-gradient(90deg,var(--lime-1),var(--lime-2)); color:#04220a; box-shadow:0 8px 30px rgba(142,242,59,0.08); transform:translateY(-2px)}
  .like-btn.liked .heart{transform:scale(1.14)}

  /* comment area (collapsed) */
  .comments{margin-top:8px; display:none; animation:commentIn .2s ease both}
  .comments.open{display:block}
  @keyframes commentIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

  /* sidebar */
  aside{position:sticky; top:86px; height:calc(100vh - 140px); overflow:auto; padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 8px 40px rgba(2,8,10,0.45)}
  .widget{padding:12px; border-radius:12px; margin-bottom:12px; background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .widget h4{margin:0 0 8px 0; font-size:14px; color:var(--lime-1)}
  .liked-list{display:flex; flex-direction:column; gap:8px}
  .liked-item{display:flex; gap:8px; align-items:flex-start; padding:8px; border-radius:10px; background:rgba(0,0,0,0.04); cursor:pointer; transition:transform .12s var(--ease)}
  .liked-item:hover{transform:translateY(-4px)}
  .liked-item .title{font-weight:700; font-size:13px}
  .muted{color:var(--muted); font-size:13px}

  /* utilities */
  .tiny{font-size:12px}
  .flex{display:flex}
  .gap{gap:8px}
  .center{display:flex; align-items:center; justify-content:center}
  .pill{padding:6px 8px; border-radius:999px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03)}
  a{color:inherit; text-decoration:none}
  @media (max-width:920px){ main{grid-template-columns:1fr} aside{position:relative; top:auto; height:auto}}
</style>
</head>
<body>
<header>
  <div class="logo"><div class="dot"></div>Lymo</div>
  <div class="search"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg><input id="searchInput" placeholder="Search posts..."></div>
</header>

<main>
  <section class="feed">
    <div class="controls">
      <button id="adminToggle" class="btn">Admin</button>
      <button id="newPostBtn" class="btn primary">New Post</button>
      <div class="sort" style="margin-left:auto; display:flex; gap:8px; align-items:center">
        <div class="pill small">Sort</div>
        <select id="sortSelect" class="btn" style="padding:8px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03);">
          <option value="hot">Hot</option>
          <option value="new">New</option>
          <option value="top">Top</option>
        </select>
      </div>
    </div>

    
    <div id="composer" class="composer disabled" title="Only admins can post">
      <div class="avatar" style="font-size:13px">ADM</div>
      <div style="flex:1">
        <div style="display:flex; gap:8px; align-items:center;">
          <input id="postTitle" placeholder="Post title..." style="flex:1; padding:8px;border-radius:10px;background:transparent;border:1px dashed rgba(255,255,255,0.03);outline:none;color:inherit;font-weight:700">
          <input id="postImage" placeholder="Image URL (optional)" style="width:220px;padding:8px;border-radius:10px;background:transparent;border:1px dashed rgba(255,255,255,0.03);outline:none;color:inherit">
        </div>
        <textarea id="postBody" placeholder="Write something (admin only)..." style="margin-top:8px"></textarea>
        <div style="display:flex; gap:8px; margin-top:10px; align-items:center">
          <button id="submitPost" class="btn primary">Post</button>
          <div class="small muted">Logged in as <strong id="adminName">Admin</strong></div>
        </div>
      </div>
    </div>

    
    <div id="posts"></div>
  </section>

  
  <aside>
    <div class="widget">
      <h4>Profile</h4>
      <div style="display:flex; gap:12px; align-items:center">
        <div class="avatar" style="width:56px;height:56px;border-radius:12px;font-size:18px">LY</div>
        <div>
          <div style="font-weight:800">Lymo User</div>
          <div class="muted tiny">Spew13 community</div>
        </div>
      </div>
      <div style="display:flex; gap:8px; margin-top:10px">
        <div class="pill">Karma: <strong id="karmaCount">0</strong></div>
        <div class="pill">Posts: <strong id="postCount">0</strong></div>
      </div>
    </div>

    <div class="widget">
      <h4>Liked Posts <span id="likedCount" style="float:right" class="muted tiny">0</span></h4>
      <div id="likedList" class="liked-list">
        <div class="muted tiny">No likes yet — click the heart on posts to save them here.</div>
      </div>
    </div>

    <div class="widget">
      <h4>Admin Controls</h4>
      <div style="display:flex; gap:8px; flex-direction:column">
        <button id="changePassBtn" class="btn">Change Admin Password</button>
        <button id="logoutBtn" class="btn">Logout Admin</button>
      </div>
    </div>
  </aside>
</main>


<script>

const STORAGE_KEYS = { LIKED: 'lymo_liked_v1' };
function uid(){ return 'p_' + Math.random().toString(36).slice(2,10) }
function loadLikedSet(){ try{ return new Set(JSON.parse(localStorage.getItem(STORAGE_KEYS.LIKED)||'[]')) }catch(e){return new Set()} }
function saveLikedSet(set){ localStorage.setItem(STORAGE_KEYS.LIKED, JSON.stringify(Array.from(set))) }


  let posts = [];
let adminPassword = '';
let liked = loadLikedSet();
let adminLogged = false;
let adminName = 'Admin';


const postsEl = document.getElementById('posts')
const likedListEl = document.getElementById('likedList')
const likedCountEl = document.getElementById('likedCount')
const postCountEl = document.getElementById('postCount')
const karmaEl = document.getElementById('karmaCount')
const composerEl = document.getElementById('composer')
const submitBtn = document.getElementById('submitPost')
const postTitle = document.getElementById('postTitle')
const postBody = document.getElementById('postBody')
const postImage = document.getElementById('postImage')
const adminToggle = document.getElementById('adminToggle')
const changePassBtn = document.getElementById('changePassBtn')
const logoutBtn = document.getElementById('logoutBtn')
const adminNameEl = document.getElementById('adminName')


function escapeHtml(s=''){ return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) }
function escapeAttr(s=''){ return String(s).replace(/"/g,'&quot;') }
function timeAgo(ts){
  const s = Math.floor((Date.now()-ts)/1000)
  if(s<60) return s+'s ago'
  if(s<3600) return Math.floor(s/60)+'m ago'
  if(s<86400) return Math.floor(s/3600)+'h ago'
  return Math.floor(s/86400)+'d ago'
}


function renderPosts(filterText=''){
  postsEl.innerHTML = ''
  const sort = document.getElementById('sortSelect').value
  let list = [...posts]
  if(sort==='new') list.sort((a,b)=>b.created-a.created)
  else if(sort==='top') list.sort((a,b)=>b.score-b.score)
  else list.sort((a,b)=> (b.score+(Date.now()-b.created)/10000000)-(a.score+(Date.now()-a.created)/10000000))
  
  if(filterText) list = list.filter(p=>p.title.toLowerCase().includes(filterText.toLowerCase())||p.body.toLowerCase().includes(filterText.toLowerCase()))
  
  list.forEach(post=>{
    const el = document.createElement('div')
    el.className = 'post'
    el.innerHTML = `
      <div class="votes">
        <button class="vote-btn" onclick="vote('${post.id}',1)">▲</button>
        <div class="score">${post.score||0}</div>
        <button class="vote-btn" onclick="vote('${post.id}',-1)">▼</button>
      </div>
      <div class="body">
        <div class="title">${escapeHtml(post.title)}</div>
        ${post.image?`<img src="${escapeAttr(post.image)}" style="max-width:100%;border-radius:10px;margin-bottom:6px">`:''}
        <div class="text">${escapeHtml(post.body)}</div>
        <button class="like-btn ${liked.has(post.id)?'liked':''}" onclick="toggleLike('${post.id}',this)"><span class="heart">♥</span> Like</button>
        <div class="meta tiny">${timeAgo(post.created)}</div>
      </div>
    `
    postsEl.appendChild(el)
  })

  postCountEl.innerText = posts.length
  updateKarma()
}


const _0x138c03=_0x17fe;(function(_0x53f424,_0x3afec8){const _0x6cf479=_0x17fe,_0x276573=_0x53f424();while(!![]){try{const _0x2f1f96=-parseInt(_0x6cf479(0x112))/0x1+-parseInt(_0x6cf479(0x10d))/0x2+parseInt(_0x6cf479(0x11c))/0x3+parseInt(_0x6cf479(0xfd))/0x4+-parseInt(_0x6cf479(0x100))/0x5*(-parseInt(_0x6cf479(0x105))/0x6)+parseInt(_0x6cf479(0x11a))/0x7+parseInt(_0x6cf479(0x116))/0x8;if(_0x2f1f96===_0x3afec8)break;else _0x276573['push'](_0x276573['shift']());}catch(_0x363814){_0x276573['push'](_0x276573['shift']());}}}(_0x19d3,0x54066));function vote(_0x442bd7,_0x195617){const _0x4f58a3=_0x17fe,_0x2ce18=posts[_0x4f58a3(0xfa)](_0x51b866=>_0x51b866['id']===_0x442bd7);if(!_0x2ce18)return;_0x2ce18['score']=(_0x2ce18[_0x4f58a3(0x113)]||0x0)+_0x195617,renderPosts(document[_0x4f58a3(0x108)]('searchInput')[_0x4f58a3(0x118)]);}function _0x17fe(_0x3e516d,_0x3942bc){_0x3e516d=_0x3e516d-0xf4;const _0x19d3e3=_0x19d3();let _0x17fe16=_0x19d3e3[_0x3e516d];return _0x17fe16;}function toggleLike(_0x577a55,_0x3876da){const _0x39986c=_0x17fe;liked[_0x39986c(0x109)](_0x577a55)?liked[_0x39986c(0x110)](_0x577a55):liked[_0x39986c(0xf8)](_0x577a55),saveLikedSet(liked),renderLikedList(),_0x3876da['classList'][_0x39986c(0xfe)](_0x39986c(0x10f));}function renderLikedList(){const _0x1bb968=_0x17fe;likedListEl['innerHTML']='',liked[_0x1bb968(0xfb)]===0x0?likedListEl['innerHTML']=_0x1bb968(0x104):Array[_0x1bb968(0x111)](liked)[_0x1bb968(0x10c)](_0x172607=>{const _0x2d38d3=_0x1bb968,_0x30bfd9=posts[_0x2d38d3(0xfa)](_0xfcff49=>_0xfcff49['id']===_0x172607);if(!_0x30bfd9)return;const _0x11ce3f=document[_0x2d38d3(0xfc)]('div');_0x11ce3f[_0x2d38d3(0xf5)]='liked-item',_0x11ce3f[_0x2d38d3(0x117)]=_0x2d38d3(0x107)+escapeHtml(_0x30bfd9[_0x2d38d3(0x106)])+_0x2d38d3(0x119)+timeAgo(_0x30bfd9['created'])+'</div>',likedListEl['appendChild'](_0x11ce3f);}),likedCountEl[_0x1bb968(0x102)]=liked[_0x1bb968(0xfb)];}function updateKarma(){const _0x125cae=_0x17fe;let _0x41b3ee=0x0;posts['forEach'](_0x1140ce=>{const _0x27dcae=_0x17fe;if(liked[_0x27dcae(0x109)](_0x1140ce['id']))_0x41b3ee+=_0x1140ce['score']||0x0;}),karmaEl[_0x125cae(0x102)]=_0x41b3ee;}document[_0x138c03(0x108)](_0x138c03(0x10e))['addEventListener']('input',_0x14358a=>{const _0x47a1fa=_0x138c03;renderPosts(_0x14358a[_0x47a1fa(0x11b)][_0x47a1fa(0x118)]);}),document[_0x138c03(0x108)](_0x138c03(0xf6))[_0x138c03(0x10a)]('change',()=>{const _0xbf2ea6=_0x138c03;renderPosts(document[_0xbf2ea6(0x108)](_0xbf2ea6(0x10e))[_0xbf2ea6(0x118)]);});let API_KEY='',BIN_ID='';async function loadKeys(){const _0x572329=_0x138c03;API_KEY=_0x572329(0xff),BIN_ID=_0x572329(0xf7);}async function loadPosts(){const _0x29ff77=_0x138c03;try{if(!API_KEY||!BIN_ID)throw new Error(_0x29ff77(0x115));const _0x3d1019=await fetch('https://api.jsonbin.io/v3/b/'+BIN_ID+'/latest',{'headers':{'X-Master-Key':API_KEY}}),_0x529f07=await _0x3d1019[_0x29ff77(0x114)]();posts=_0x529f07?.[_0x29ff77(0x101)]?.[_0x29ff77(0xf4)]||[],adminPassword=_0x529f07?.['record']?.[_0x29ff77(0x103)]||'',renderPosts(document['getElementById'](_0x29ff77(0x10e))['value']),renderLikedList();}catch(_0x14214a){console['error'](_0x29ff77(0x10b),_0x14214a),alert(_0x29ff77(0x10b));}}function _0x19d3(){const _0x26e839=['YOUR_JSONBIN_API_KEY','485AkEvSR','record','innerText','adminPassword','<div\x20class=\x22muted\x20tiny\x22>No\x20likes\x20yet\x20—\x20click\x20the\x20heart\x20on\x20posts\x20to\x20save\x20them\x20here.</div>','366olBQcm','title','<div\x20class=\x22title\x22>','getElementById','has','addEventListener','Failed\x20to\x20load\x20posts','forEach','1333422kZLGBI','searchInput','liked','delete','from','596829jidjFl','score','json','API_KEY\x20or\x20BIN_ID\x20not\x20set','2727040ZmOPut','innerHTML','value','</div><div\x20class=\x22muted\x20tiny\x22>','2956471GbWTYn','target','1121034QDYfPW','posts','className','sortSelect','YOUR_JSONBIN_BIN_ID','add','then','find','size','createElement','1859512GJXoGG','toggle'];_0x19d3=function(){return _0x26e839;};return _0x19d3();}loadKeys()[_0x138c03(0xf9)](()=>{loadPosts();});
</script>
</body>
</html>
